(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225027"],{e325:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),i("el-breadcrumb-item",[e._v("会议管理")]),i("el-breadcrumb-item",[e._v("会议列表")])],1),i("el-card",{staticClass:"box-card"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入会议名称",clearable:""},on:{clear:e.getMeetingList},model:{value:e.queryInfo.name,callback:function(t){e.$set(e.queryInfo,"name",t)},expression:"queryInfo.name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getMeetingList},slot:"append"})],1)],1),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showAddDialog()}}},[e._v("新增")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.meetingList,boder:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),i("el-table-column",{attrs:{prop:"name",label:"会议名称",width:"180"}}),i("el-table-column",{attrs:{prop:"roomName",label:"会议室名称",width:"180"}}),i("el-table-column",{attrs:{prop:"num",label:"会议室容量",width:"180"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top",enterable:!1}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.showEditDialog(t.row.id)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上传excel文件",placement:"top",enterable:!1}},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(i){return e.showUploadDialog(t.row.id)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.showDelDialog(t.row.id)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top",enterable:!1}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"mini"},on:{click:function(i){return e.showLeader(t.row.id)}}})],1)]}}])})],1),i("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":e.pageSizes,"page-size":e.queryInfo.length,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClose,"before-close":e.addDialogBeforeClose,open:e.getRoomList}},[i("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"90px"}},[i("el-form-item",{staticClass:"el-form-item-id",attrs:{label:"id",prop:"id"}},[i("el-input",{model:{value:e.addForm.id,callback:function(t){e.$set(e.addForm,"id",t)},expression:"addForm.id"}})],1),i("el-form-item",{attrs:{label:"会议名称",prop:"name"}},[i("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),i("el-form-item",{attrs:{label:"选择会议室",prop:"rId"}},[i("el-select",{attrs:{filterable:"",placeholder:"参数类型",clearable:"",disabled:!e.isAddDialog},on:{blur:e.roomChange},model:{value:e.addForm.rId,callback:function(t){e.$set(e.addForm,"rId",t)},expression:"addForm.rId"}},e._l(e.roomList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addMeeting}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"删除会议",visible:e.delDialogVisible,width:"30%"},on:{"update:visible":function(t){e.delDialogVisible=t}}},[i("span",[e._v("确定删除该会议吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.delDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.delMeeting}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"上传对应excel",visible:e.uploadDiologVisible,width:"50%"},on:{"update:visible":function(t){e.uploadDiologVisible=t},close:e.clearUpload}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl+"/web/excel/upload","file-list":e.fileList,"auto-upload":!1,limit:1,"on-success":e.uploadSuccess}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传一个xls/xlsx文件")])],1)],1)],1)},a=[],l=i("1bab"),s=i("b95e"),n={name:"",data:function(){return{dialogTitle:"",addDialogVisible:!1,delDialogVisible:!1,isAddDialog:!0,uploadDiologVisible:!1,uploadUrl:s["a"].BASE_URL,selectMeetingId:"",delId:"",meetingList:[],fileList:[],total:0,pageSizes:[5,10,100,500],queryInfo:{name:"",page:1,length:5},addForm:{name:"",rId:""},roomList:[],addFormRules:{name:[{required:!0,message:"请输入参数名",trigger:"blur"}],rId:{required:!0,message:"请选择活动区域",trigger:"change"}}}},methods:{roomChange:function(e){},handleSizeChange:function(e){this.queryInfo.length=e,this.getParameterList()},handleCurrentChange:function(e){this.queryInfo.page=e,this.getParameterList()},showLeader:function(e){this.$store.commit("setMeetingId",e),this.$router.push("/leader")},showUploadDialog:function(e){var t=this;Object(l["a"])({url:"/web/meetingleader",method:"get",params:{mId:e}}).then((function(i){0===i.data?(t.uploadDiologVisible=!0,t.selectMeetingId=e):t.$message({message:"该会议室已被他人使用",type:"error",showClose:!0})})).catch((function(e){console.log(e)}))},showEditDialog:function(e){var t=this;this.dialogTitle="修改参数",this.addDialogVisible=!0,this.isAddDialog=!1,Object(l["a"])({url:"/web/meeting/"+e,method:"get"}).then((function(e){t.addForm=e.data})).catch((function(e){console.log(e)}))},showDelDialog:function(e){this.delDialogVisible=!0,this.delId=e},showAddDialog:function(){this.dialogTitle="添加参数",this.addDialogVisible=!0,this.isAddDialog=!0},submitUpload:function(){this.$refs.upload.submit()},uploadSuccess:function(e,t,i){var o=this;console.log(e),200===e.status?Object(l["a"])({url:"/web/meetingleader/add",method:"post",data:{mId:this.selectMeetingId,eId:e.data}}).then((function(e){o.$message({message:e.msg,type:"success",showClose:!0}),o.uploadDiologVisible=!1})).catch((function(e){console.log(e)})):this.$message({message:e.msg,type:"error",showClose:!0})},clearUpload:function(){this.$refs.upload.clearFiles()},addMeeting:function(){var e=this;this.$refs.addFormRef.validate((function(t){if(t){var i="";i=e.isAddDialog?"/web/meeting/add":"/web/meeting/update",Object(l["a"])({url:i,data:e.addForm,method:"post"}).then((function(t){e.$message({message:t.msg,type:"success",showClose:!0}),e.addDialogVisible=!1,e.getMeetingList()})).catch((function(e){console.log(e)}))}}))},delMeeting:function(){var e=this;Object(l["a"])({url:"/web/meeting/del",method:"get",params:{id:this.delId}}).then((function(t){e.$message({message:t.msg,type:"success",showClose:!0}),e.delDialogVisible=!1,e.getMeetingList()})).catch((function(e){console.log(e)}))},getRoomList:function(){var e=this;Object(l["a"])({url:"/web/meetingroom",params:{page:1,length:1e3}}).then((function(t){e.roomList=t.data})).catch((function(e){console.log(e)}))},getMeetingList:function(){var e=this;Object(l["a"])({url:"/web/meeting",params:this.queryInfo}).then((function(t){e.meetingList=t.data,e.total=t.total})).catch((function(e){console.log(e)}))},addDialogClose:function(){this.$refs.addFormRef.resetFields()},addDialogBeforeClose:function(){this.$refs.addFormRef.resetFields()}},created:function(){this.getMeetingList()}},r=n,d=i("2877"),c=Object(d["a"])(r,o,a,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d225027.57699cb3.js.map